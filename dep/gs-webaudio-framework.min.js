"use strict";function gswaFramework(){this.audioContext=new AudioContext,this.compositions=[],this.sources=[],this.tracks=[],this.on={},this.do={},this.currentComposition=null;for(var o in gswaFramework.do)this.do[o]=gswaFramework.do[o].bind(this),this.on[o]=function(){}}gswaFramework.do={},gswaFramework.do.addSource=function(o){var t=new gswaBufferSample;o.bufferSample=t,t.setContext(this.audiocontext),t.setMetadata(o.metadata),this.sources.push(o),this.on.addSource(o)},gswaFramework.do.addSources=function(o){o.forEach(this.do.addSource),this.on.addSources(o)},gswaFramework.do.loadSource=function(o){var t=this,s=o.bufferSample,i=o.data;if(i)return("string"==typeof i?s.setDataFromURL(i):s.setDataFromBlob(i)).then(function(){return t.on.loadSource(o),o})},gswaFramework.do.loadSources=function(o){Promise.all(o.map(this.do.loadSource)).then(this.on.loadSources)},gswaFramework.do.addTrack=function(o){this.tracks.push(o),this.on.addTrack(o)},gswaFramework.do.removeTrack=function(o){var t=this.tracks.findIndex(function(t){return t===o});t>-1&&(this.tracks.splice(t,1),this.on.removeTrack(o))},gswaFramework.do.addComposition=function(o){this.compositions.push(o),this.on.addComposition(o)},gswaFramework.do.removeComposition=function(o){var t=this.compositions.findIndex(function(t){return t===o});t>-1&&(this.compositions.splice(t,1),this.on.removeComposition(o))},gswaFramework.do.loadComposition=function(o){this.currentComposition!==o&&(this.currentComposition=o,this.on.loadComposition(o))},gswaFramework.do.unload=function(){var o=this.currentComposition;o&&(this.currentComposition=null,this.on.unload(o))};